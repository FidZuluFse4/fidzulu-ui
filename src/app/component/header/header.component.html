<mat-toolbar class="app-header">
  <div class="logo-container" (click)="goToHome()">
    <img src="assets/logo.PNG" alt="FidZulu Logo" />
  </div>

  <button mat-button class="location-container" (click)="openAddressDialog()">
    <mat-icon class="location-icon">location_on</mat-icon>
    <div class="location-text">
      <span class="location-line1">Deliver to</span>
      <span class="location-line2">
        {{ (selectedAddress && selectedAddress.location) || "Choose address" }}
        <ng-container *ngIf="selectedAddress"
          >({{ currencySymbol }})</ng-container
        >
      </span>
    </div>
    <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
  </button>

  <div class="search-container desktop-search">
    <mat-form-field appearance="outline" class="search-form-field">
      <input
        matInput
        [formControl]="searchControl"
        placeholder="Search for products..."
      />
      <button
        mat-icon-button
        matSuffix
        (click)="onSearch()"
        aria-label="Search"
      >
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <div class="nav-actions">
    <button
      mat-icon-button
      class="mobile-search-icon"
      (click)="toggleSearch()"
      aria-label="Toggle search"
    >
      <mat-icon>search</mat-icon>
    </button>
    <div class="nav-action-item cart-with-badge" (click)="goToCart()">
      <mat-icon>shopping_cart</mat-icon>
      <span class="cart-badge" *ngIf="cartDisplay">{{ cartDisplay }}</span>
      <span class="nav-action-text">Cart</span>
    </div>
    <div class="nav-action-item" (click)="goToWishlist()">
      <mat-icon>favorite_border</mat-icon>
      <span class="nav-action-text">Wishlist</span>
    </div>
    <div class="nav-action-item" (click)="logOut()">
      <mat-icon>logout</mat-icon>
      <span class="nav-action-text">Log Out</span>
    </div>
  </div>
</mat-toolbar>

<div class="mobile-search-wrapper" *ngIf="isSearchVisible">
  <div class="search-container">
    <mat-form-field appearance="outline" class="search-form-field">
      <input
        matInput
        [formControl]="searchControl"
        placeholder="Search for products..."
      />
      <button
        mat-icon-button
        matSuffix
        (click)="onSearch()"
        aria-label="Search"
      >
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>
</div>
