<div class="product-grid-container">
  <mat-card
    class="product-card"
    *ngFor="let product of products; trackBy: trackByProductId"
    (click)="goToProductDetails(product.p_id)"
  >
    <!-- THIS IS THE NEW CONTAINER FOR THE IMAGE -->
    <div class="card-image-container" style="position:relative;">
      <img
        mat-card-image
        [src]="product.p_img_url"
        [alt]="product.p_name"
        [title]="product.p_name"
      />
      <button class="wishlist-heart" (click)="$event.stopPropagation(); addToWishlist(product)" style="position:absolute;top:10px;right:10px;background:rgba(255,255,255,0.7);border:none;border-radius:50%;padding:6px;cursor:pointer;z-index:3;display:flex;align-items:center;justify-content:center;">
        <mat-icon style="font-size:28px;color:red;">
          {{ wishlistIds.has(product.p_id) ? 'favorite' : 'favorite_border' }}
        </mat-icon>
      </button>
    </div>

    <mat-card-content>
      <div class="brand-name">{{ product.p_subtype }}</div>
      <div class="product-name">{{ product.p_name }}</div>
      <div class="product-price">
        â‚¹{{ product.p_price.toLocaleString("en-IN") }}
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-flat-button color="primary" class="add-to-cart-btn">
        <mat-icon>add_shopping_cart</mat-icon>
        Add to Cart
      </button>
    </mat-card-actions>
  </mat-card>
</div>
